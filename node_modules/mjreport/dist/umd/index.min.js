!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).MjReport={})}(this,function(r){"use strict";var e,t,i,n,a,c,o,l,s;function h(e){return Array.isArray(e)&&"object"==typeof e[0]}(e=r.PaperType||(r.PaperType={}))[e.A4_Portrait=0]="A4_Portrait",e[e.A5_Portrait=1]="A5_Portrait",e[e.A4_Landscape=2]="A4_Landscape",e[e.A5_Landscape=3]="A5_Landscape",(t=r.PaperType||(r.PaperType={})).getDimension=function(e){switch(e){case t.A4_Portrait:return{height:297,width:210};case t.A5_Portrait:return{height:210,width:148};case t.A4_Landscape:return{height:210,width:297};case t.A5_Landscape:return{height:148,width:210}}},t.getRule=function(e){switch(e){case t.A4_Portrait:return"a4 portrait";case t.A5_Portrait:return"a5 portrait";case t.A4_Landscape:return"a4 landscape";case t.A5_Landscape:return"a5 landscape"}},t.getSize=function(e){switch(e){case t.A4_Portrait:return{pageSize:"A4",landscape:!1};case t.A5_Portrait:return{pageSize:"A5",landscape:!1};case t.A4_Landscape:return{pageSize:"A4",landscape:!0};case t.A5_Landscape:return{pageSize:"A5",landscape:!0}}},t.getStyle=function(e){return"@page{ size: "+t.getRule(e)+"; margin: 0;}"},(n=i||(i={}))[n.Text=0]="Text",n[n.Heading=1]="Heading",n[n.Table=2]="Table",n[n.PageBreak=3]="PageBreak",(a=r.HeadingLevel||(r.HeadingLevel={})).H1="h1",a.H2="h2",a.H3="h3",a.H4="h4",a.H5="h5",a.H6="h6",(o=c||(c={})).index="index",o.row="row",o.empty="empty",(s=l||(l={})).Header="th",s.Body="td";var d=function(){function e(e,t){void 0===e&&(e="MJ-Report Print Preview"),void 0===t&&(t=r.PaperType.A4_Portrait),this.title=e,this.paperType=t,this.style="",this.headCss=[],this.content=[],this.header=[],this.footer=[]}return e.prototype.setStyle=function(e){this.style=e},e.prototype.addCss=function(e){this.headCss.push(e)},e.prototype.addText=function(e,t,n){return{tag:i.Text,value:{text:e},className:t,idName:n}},e.prototype.addHeading=function(e,t,n,a){return void 0===t&&(t=r.HeadingLevel.H1),{tag:i.Heading,value:{text:e,level:t},className:n,idName:a}},e.prototype.addPageBreak=function(){return{tag:i.PageBreak}},e.prototype.addTable=function(e,t,n){return{tag:i.Table,value:e,className:t,idName:n}},e.prototype.setContent=function(e){this.content=e},e.prototype.setHeader=function(e){this.header=e},e.prototype.setFooter=function(e){this.footer=e},e.prototype.generate=function(){return{metaData:{title:this.title,css:this.headCss,paperType:this.paperType,style:this.style},header:this.header,footer:this.footer,content:this.content}},e}(),p=function(){function e(e,t){void 0===t&&(t="mjRoot"),this.data=e,this.rootElementName=t,this.pageNumber=0,this.currentPage=null,this.rootElement=null}return e.prototype.createDomElement=function(e,t,n){var a=document.createElement(e);return n&&(a.id=n),t&&(a.className=t),a},e.prototype.loadHead=function(){var e,n=this;document.title=this.data.metaData.title||"Mj Reporter";var t=this.createDomElement("style");t.innerHTML='\nbody {\n  background: rgb(204,204,204); \n}\n\npage {\n  background: white;\n  margin: 0 auto;\n  margin-bottom: 0.5cm;\n  box-shadow: 0 0 0.5cm rgba(0,0,0,0.5);\n  display: flex;\n  flex-direction: column;\n}\n\npage[type="A4_Portrait"] {\n  width: 210mm;\n  height: 297mm;\n}\n\npage[type="A4_Landscape"] {\n  width: 297mm;\n  height: 210mm;\n}\n\npage[type="A5_Portrait"] {\n  width: 148mm;\n  height: 210mm;\n}\n\npage[type="A5_Landscape"] {\n  width: 210mm;\n  height: 148mm;\n}\n\n@media print {\n  .no-print {\n    display: none;\n  } \n  \n  body, page {\n    margin: 0;\n    box-shadow: none;\n  }\n}\n\n.header_section {\n  margin-top: 10px;\n  margin-left: 5px;\n  margin-right: 5px;\n  flex-shrink: 0;\n  position: relative;\n}\n\n.content_section {\n  margin-left: 5px;\n  margin-right: 5px;\n  height: 100%;\n  overflow: hidden;\n}\n\n.footer_section {\n  margin-bottom: 5px;\n  margin-left: 5px;\n  margin-right: 5px;\n  flex-shrink: 0;\n  overflow: hidden;\n  position: relative;\n}\n\n.basic_tbl {\n  border: 1px solid black;\n  border-collapse: collapse;\n  margin: auto;\n  padding:5px;\n  width: 80%;\n}\n\n.basic_tbl th {\n  border-bottom: 2px solid black;\n  border-right: 1px solid black;\n  font-size: 20px;\n  font-weight: 600;\n  padding: 5px;\n  vertical-align: middle;\n}\n\n.basic_tbl tr {\n  border-top: 1px solid black;\n  border-bottom: 1px solid black;\n}\n\n.basic_tbl tr:hover td {\n  background:rgb(219, 222, 255);\n}\n\n.basic_tbl tr:nth-child(odd) td {\n  background:#EBEBEB;\n}\n\n.basic_tbl tr:nth-child(odd):hover td {\n  background:rgb(219, 222, 255);\n}\n\n.basic_tbl td {\n  font-size:18px;\n  vertical-align:middle;\n  padding:8px;\n  border-right: 1px solid black;\n  border-left: 1px solid black;\n} \n\n.rtl {\n  direction: rtl;\n}\n\n.ltr {\n  direction: ltr;\n}\n\n.text-left {\n  text-align: left;\n}\n\n.text-center {\n  text-align: center;\n}\n\n.text-right {\n  text-align: right;\n}\n '+this.data.metaData.style+" "+r.PaperType.getStyle(this.data.metaData.paperType),document.head.append(t);var a=(this.data.metaData.css||[]).map(function(e){var t=n.createDomElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",e),t});(e=document.head).append.apply(e,a)},e.prototype.addPageSections=function(e){var t=this.createDomElement("div","header_section","header_"+this.pageNumber);e.append(t);var n=this.createDomElement("div","content_section","content_"+this.pageNumber);e.append(n);var a=this.createDomElement("div","footer_section","footer_"+this.pageNumber);return e.append(a),{header:t,content:n,footer:a}},e.prototype.createNewPage=function(){this.pageNumber+=1;var e=this.createDomElement("page","page_section","page_"+this.pageNumber);e.setAttribute("type",""+r.PaperType[this.data.metaData.paperType]),this.rootElement.append(e),this.currentPage=this.addPageSections(e),this.createElements(this.data.header,this.currentPage.header,!1),this.createElements(this.data.footer,this.currentPage.footer,!1)},e.prototype.addElement=function(e,t,n,a){if(void 0===t&&(t=this.currentPage.content),void 0===n&&(n=!0),a&&(t=a.body),t.append(e),n){var r=e.getBoundingClientRect().bottom;Math.ceil(this.currentPage.footer.getBoundingClientRect().top)+2<r&&(t.removeChild(e),this.createNewPage(),t=this.currentPage.content,a&&(a.table=this.createDomElement(a.element.name,a.element.className,a.element.idName),a.body=this.createDomElement("tbody"),a.table.append(a.header.cloneNode(!0)),a.table.append(a.body),this.addElement(a.table),t=a.body),t.append(e))}},e.prototype.createTableRow=function(e,t){void 0===t&&(t=l.Body);for(var n=!h(e),a=this.createDomElement("tr"),r=0,i=e;r<i.length;r++){var o=i[r],s=null,d=null;n?(d=o,(s=this.createDomElement(t)).innerHTML=d):(d=o,(s=this.createDomElement(t,d.className,d.idName)).setAttribute("style",d.style),s.innerHTML=d.value),a.append(s)}return a},e.prototype.getTableField=function(e,t,n){if(h(t)){s=[];for(var a=0,r=t;a<r.length;a++){p=r[a];var i=Object.create(p);if(e[p.value])i.value=e[p.value],s.push(i);else if(p.value.includes("@")){for(var o in c)if(p.value==="@"+c[o]){i.value=n[c[o]],s.push(i);break}}else s.push(p)}return s}for(var s=[],d=0,l=t;d<l.length;d++){var p;if(e[p=l[d]])s.push(e[p]);else if(p.includes("@")){for(var o in c)if(p==="@"+c[o]){s.push(n[c[o]]);break}}else s.push(p)}return s},e.prototype.createTable=function(e){var o=this,s={element:{name:"table",className:e.className,idName:e.idName},header:{},body:{},table:{}};s.table=this.createDomElement("table",e.className,e.idName);var d=e.value;if(d.header&&(s.header=this.createDomElement("thead"),s.header.append(this.createTableRow(d.header,l.Header)),s.table.append(s.header)),s.body=this.createDomElement("tbody"),s.table.append(s.body),this.addElement(s.table),d.items.forEach(function(e,t){var n,a={index:t,row:t+1,empty:""},r=null;if(n=d.fields,Array.isArray(n)||"function"!=typeof n)r=o.createTableRow(o.getTableField(e,d.fields,a));else{var i=d.fields;r=o.createTableRow(i(e,a))}o.addElement(r,null,!0,s)}),d.footer)for(var t=0,n=d.footer;t<n.length;t++){var a=n[t];this.addElement(this.createTableRow(a),null,!0,s)}},e.prototype.createElement=function(e,t,n){void 0===n&&(n=!0);var a=null,r=null;switch(e.tag){case i.PageBreak:this.createNewPage();break;case i.Text:r=e.value,(a=this.createDomElement("p",e.className,e.idName)).innerHTML=r.text,this.addElement(a,t,n);break;case i.Heading:r=e.value,(a=this.createDomElement(r.level,e.className,e.idName)).innerHTML=r.text,this.addElement(a,t,n);break;case i.Table:this.createTable(e)}return a},e.prototype.createElements=function(e,t,n){void 0===n&&(n=!0);for(var a=0,r=e;a<r.length;a++){var i=r[a];this.createElement(i,t,n)}},e.prototype.draw=function(){this.loadHead(),this.rootElement=document.getElementById(this.rootElementName),this.createNewPage(),this.createElements(this.data.content),console.log("Report Rendered ;-)")},e}();r.Generator=d,r.Renderer=p,Object.defineProperty(r,"__esModule",{value:!0})});